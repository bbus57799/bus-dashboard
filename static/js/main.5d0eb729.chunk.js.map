{"version":3,"sources":["firebase.js","AuthProvider.js","utils.js","login/LoginForm.js","login/LoginPage.js","routes/PublicRoute.js","routes/ProtectedRoute.js","home/BusesTable.js","home/BusesFilter.js","bus-page/BusForm.js","bus-page/BusModal.js","home/HomePage.js","users-dashboard/UsersFilter.js","users-dashboard/UsersTable.js","users-dashboard/AddUserForm.js","users-dashboard/AddUserModal.js","users-dashboard/UpdateUserModal.js","users-dashboard/UsersDashboard.js","bus-page/ReadingsTable.js","bus-page/BusPage.js","routes/AdminRoute.js","HeaderPage.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","firestore","UserContext","createContext","user","initialized","login","undefined","logout","signup","updateUser","addAuth","ChildComponent","props","Consumer","authInfo","AuthProvider","authUnsubscriber","userDocUnsubscriber","state","email","password","rememberMe","a","setPersistence","Auth","Persistence","LOCAL","SESSION","signInWithEmailAndPassword","userInfo","currentUser","getIdToken","token","fetch","config","api_url","method","headers","body","JSON","stringify","res","status","json","userId","signOut","this","onAuthStateChanged","uid","collection","doc","onSnapshot","snapshot","exists","setState","data","value","Provider","children","Component","getErrorMessage","error","console","log","code","message","LoginForm","isLoading","onSubmit","e","preventDefault","stopPropagation","onLogin","errorMessage","handleChange","fieldName","target","handleCheck","checked","Form","Group","controlId","Label","Control","type","placeholder","onChange","required","Text","className","Check","label","Button","variant","disabled","Modal","size","show","aria-labelledby","centered","Header","Title","id","Body","rst","render","to","withRouter","buses","history","Table","striped","bordered","hover","map","bus","count","overcrowded_threshold","highestCountToday","role","onClick","push","name","driverName","BusesFilter","key","onSearch","Card","inline","as","custom","onReset","BusForm","busInfo","readOnlyId","onClose","BusModal","info","set","onHide","closeButton","HomePage","showBusModal","searchUnsubscriber","fetchBuses","query","qs","parse","location","search","firestoreQuery","where","docs","d","closeBusModal","openBusModal","prevProps","prevState","Container","s","UsersFilter","UsersTable","users","onSelected","index","phone","AddUserForm","initialData","UsersDashboard","showAddUser","selectedUser","fetchUsers","orderBy","onUserClicked","UpdateUserModal","ReadingsTable","readings","reading","createdAt","toDate","toLocaleString","getIsoDateString","date","year","getFullYear","padStart","month","getMonth","day","getDate","getIsoDate","isoString","parts","split","Date","BusPage","toDateString","docUnsubscriber","fetchReadings","busId","match","params","nextDay","setDate","onUpdateBus","update","goBack","Navbar","bg","Nav","path","AdminRoute","fixed","AuthAppRoutes","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5d0eb729.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD1HWzM2Ac2U0Se2upiCxvF9yKGrFe_YJY\",\n  authDomain: \"bus-dashboard-12aad.firebaseapp.com\",\n  projectId: \"bus-dashboard-12aad\",\n  storageBucket: \"bus-dashboard-12aad.appspot.com\",\n  messagingSenderId: \"1024758108522\",\n  appId: \"1:1024758108522:web:565d31143af7a5259a9513\",\n  measurementId: \"G-L21M94PQ90\",\n};\n\nfirebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\n","import React, { Component, createContext } from \"react\";\nimport { auth, firestore } from \"./firebase\";\nimport firebase from \"firebase/app\";\nimport config from \"./config.json\";\n\nexport const UserContext = createContext({\n  user: null,\n  initialized: false,\n  login: undefined,\n  logout: undefined,\n  signup: undefined,\n  updateUser: undefined,\n});\n\nexport const addAuth = (ChildComponent) => (props) =>\n  (\n    <UserContext.Consumer>\n      {(authInfo) => <ChildComponent {...props} authInfo={authInfo} />}\n    </UserContext.Consumer>\n  );\n\nexport class AuthProvider extends Component {\n  authUnsubscriber = null;\n  userDocUnsubscriber = null;\n\n  state = {\n    initialized: false,\n    user: null,\n  };\n\n  componentDidMount() {\n    this.authUnsubscriber = auth.onAuthStateChanged((user) => {\n      // If user changed, unsubscribe from document of previous user\n      if (this.state.user?.uid !== user?.uid) {\n        if (this.userDocUnsubscriber) {\n          this.userDocUnsubscriber();\n          this.userDocUnsubscriber = null;\n        }\n      }\n\n      if (user) {\n        this.userDocUnsubscriber = firestore\n          .collection(\"users\")\n          .doc(user.uid)\n          .onSnapshot((snapshot) => {\n            if (snapshot.exists) {\n              this.setState({\n                user: snapshot.data(),\n                initialized: true,\n              });\n            }\n          });\n      } else {\n        this.setState({\n          user: null,\n          initialized: true,\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.authUnsubscriber) this.authUnsubscriber();\n    if (this.userDocUnsubscriber) this.userDocUnsubscriber();\n  }\n\n  login = async (email, password, rememberMe) => {\n    if (rememberMe) {\n      await auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n    } else {\n      await auth.setPersistence(firebase.auth.Auth.Persistence.SESSION);\n    }\n    await auth.signInWithEmailAndPassword(email, password);\n  };\n\n  signup = async (userInfo) => {\n    const token = await auth.currentUser.getIdToken();\n    const res = await fetch(`${config.api_url}/users`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ ...userInfo, token }),\n    });\n    if (res.status < 200 || res.status >= 300) throw await res.json();\n  };\n\n  updateUser = async (userId, userInfo) => {\n    const token = await auth.currentUser.getIdToken();\n    const res = await fetch(`${config.api_url}/users/${userId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ ...userInfo, token }),\n    });\n    if (res.status < 200 || res.status >= 300) throw await res.json();\n  };\n\n  logout = async () => {\n    await auth.signOut();\n  };\n\n  render() {\n    const value = {\n      initialized: this.state.initialized,\n      user: this.state.user,\n      login: this.login,\n      logout: this.logout,\n      signup: this.signup,\n      updateUser: this.updateUser,\n    };\n    return (\n      <UserContext.Provider value={value}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default AuthProvider;\n","export function getErrorMessage(error) {\n  console.log(\"Error Occured: \", error);\n  if (error?.code) {\n    switch (error.code) {\n      case \"auth/user-not-found\":\n        return \"Invalid email or password.\";\n      case \"auth/wrong-password\":\n        return \"Invalid email or password.\";\n      case \"auth/email-already-exists\":\n        return \"The email address is already in use by another user.\";\n      case \"auth/invalid-password\":\n        return error.message;\n      default:\n    }\n  }\n  return \"Error happened\";\n}\n","import React, { Component } from \"react\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { getErrorMessage } from \"../utils\";\n\nexport class LoginForm extends Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    rememberMe: true,\n    error: \"\",\n    isLoading: false,\n  };\n\n  onSubmit = async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { onLogin } = this.props;\n    this.setState({ isLoading: true, error: \"\" });\n    try {\n      await onLogin(\n        this.state.email,\n        this.state.password,\n        this.state.rememberMe\n      );\n    } catch (e) {\n      const errorMessage = getErrorMessage(e);\n      this.setState({ error: errorMessage });\n    }\n    this.setState({ isLoading: false });\n  };\n\n  render() {\n    return (\n      <Form onSubmit={this.onSubmit}>\n        <Form.Group controlId=\"formBasicEmail\">\n          <Form.Label>Email address</Form.Label>\n          <Form.Control\n            type=\"email\"\n            placeholder=\"Enter email\"\n            onChange={this.handleChange(\"email\")}\n            value={this.state.email}\n            required\n          />\n          <Form.Text className=\"text-muted\">\n            We'll never share your email with anyone else.\n          </Form.Text>\n        </Form.Group>\n\n        <Form.Group controlId=\"formBasicPassword\">\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Password\"\n            value={this.state.password}\n            onChange={this.handleChange(\"password\")}\n            required\n          />\n        </Form.Group>\n        <Form.Group controlId=\"formBasicCheckbox\">\n          <Form.Check\n            type=\"checkbox\"\n            onChange={this.handleCheck(\"rememberMe\")}\n            checked={this.state.rememberMe}\n            label=\"Remember Me\"\n          />\n        </Form.Group>\n\n        <p className=\"text-danger\">{this.state.error}</p>\n        <Button variant=\"primary\" type=\"submit\" disabled={this.state.isLoading}>\n          Login\n        </Button>\n      </Form>\n    );\n  }\n\n  handleChange =\n    (fieldName) =>\n    ({ target: { value } }) =>\n      this.setState({ [fieldName]: value, error: \"\" });\n\n  handleCheck =\n    (fieldName) =>\n    ({ target: { checked } }) =>\n      this.setState({ [fieldName]: checked });\n}\n\nexport default LoginForm;\n","import { Modal } from \"react-bootstrap\";\nimport { addAuth } from \"../AuthProvider\";\nimport LoginForm from \"./LoginForm\";\n\nfunction LoginPage({ authInfo }) {\n  return (\n    <Modal\n      size=\"md\"\n      show\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header>\n        <Modal.Title id=\"contained-modal-title-vcenter\">Login</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <LoginForm onLogin={authInfo.login} />\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default addAuth(LoginPage);\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { addAuth } from \"../AuthProvider\";\n\nfunction PublicRoute({ children, authInfo, ...rst }) {\n  return (\n    <Route\n      {...rst}\n      render={() => (authInfo.user ? <Redirect to=\"/users\" /> : children)}\n    />\n  );\n}\n\nexport default addAuth(PublicRoute);\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { addAuth } from \"../AuthProvider\";\n\nfunction ProtectedRoute({ children, authInfo, ...rst }) {\n  return (\n    <Route\n      {...rst}\n      render={() => (authInfo.user ? children : <Redirect to=\"/login\" />)}\n    />\n  );\n}\n\nexport default addAuth(ProtectedRoute);\n","import React from \"react\";\nimport { Table } from \"react-bootstrap\";\nimport { withRouter } from \"react-router\";\nimport config from \"../config.json\";\n\nfunction BusesTable({ buses, history }) {\n  return (\n    <Table striped bordered hover>\n      <thead>\n        <tr>\n          <th>ID</th>\n          <th>Bus Name</th>\n          <th>Count</th>\n          <th>Highest Today</th>\n          <th>Driver Name</th>\n        </tr>\n      </thead>\n      <tbody>\n        {buses &&\n          buses.map((bus) => (\n            <tr\n              className={\n                bus.count > config.overcrowded_threshold ||\n                bus.highestCountToday > config.overcrowded_threshold\n                  ? \"table-danger\"\n                  : \"\"\n              }\n              key={bus.id}\n              role=\"button\"\n              onClick={() => history.push(`/buses/${bus.id}`)}\n            >\n              <td>{bus.id}</td>\n              <td>{bus.name}</td>\n              <td>{bus.count}</td>\n              <td>{bus.highestCountToday}</td>\n              <td>{bus.driverName}</td>\n            </tr>\n          ))}\n      </tbody>\n    </Table>\n  );\n}\n\nexport default withRouter(BusesTable);\n","import React, { Component } from \"react\";\nimport { Form, Button, Card } from \"react-bootstrap\";\n\nexport class BusesFilter extends Component {\n  state = { key: \"\", value: \"\" };\n\n  onSubmit = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSearch(this.state);\n  };\n\n  render() {\n    return (\n      <Card>\n        <Card.Body>\n          <Form\n            onSubmit={this.onSubmit}\n            inline\n            className=\"align-items-baseline\"\n          >\n            <Form.Label className=\"mx-2\">Search By: </Form.Label>\n            <Form.Control\n              onChange={(e) => this.setState({ key: e.target.value })}\n              value={this.state.key}\n              as=\"select\"\n              className=\"my-1 mr-sm-2\"\n              custom\n            >\n              <option value=\"\">Choose...</option>\n              <option value=\"id\">Bus ID</option>\n              <option value=\"name\">Bus Name</option>\n              <option value=\"driver\">Driver Name</option>\n              <option value=\"overcrowded\">Only Overcrowded</option>\n            </Form.Control>\n            <Form.Control\n              onChange={(e) => this.setState({ value: e.target.value })}\n              disabled={this.state.key === \"overcrowded\"}\n              className=\"mb-2 mr-sm-2\"\n              placeholder=\"What to search\"\n            />\n            <Button type=\"submit\" className=\"mb-2 mx-1\">\n              Search\n            </Button>\n            <Button onClick={this.props.onReset} className=\"mb-2\">\n              Reset\n            </Button>\n          </Form>\n        </Card.Body>\n      </Card>\n    );\n  }\n}\n\nexport default BusesFilter;\n","import React, { Component } from \"react\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { getErrorMessage } from \"../utils\";\n\nexport class BusForm extends Component {\n  state = {\n    id: \"\",\n    name: \"\",\n    driverName: \"\",\n    isLoading: false,\n    error: \"\",\n  };\n\n  componentDidMount() {\n    this.setState({ ...this.props.busInfo });\n  }\n\n  onSubmit = async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { onSubmit } = this.props;\n    this.setState({ isLoading: true, error: \"\" });\n    try {\n      await onSubmit(this.state);\n    } catch (error) {\n      const errorMessage = getErrorMessage(e);\n      this.setState({ error: errorMessage });\n    }\n    this.setState({ isLoading: false });\n  };\n\n  render() {\n    return (\n      <Form onSubmit={this.onSubmit}>\n        <Form.Group>\n          <Form.Label>ID</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Bus ID\"\n            value={this.state.id}\n            disabled={this.props.readOnlyId}\n            onChange={this.handleChange(\"id\")}\n            required\n          />\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label>Bus Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Enter bus name\"\n            onChange={this.handleChange(\"name\")}\n            value={this.state.name}\n          />\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label>Driver Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Enter driver name\"\n            onChange={this.handleChange(\"driverName\")}\n            value={this.state.driverName}\n          />\n        </Form.Group>\n\n        <p className=\"text-danger\">{this.state.error}</p>\n        <Button variant=\"primary\" type=\"submit\" disabled={this.state.isLoading}>\n          Save\n        </Button>\n        <Button\n          onClick={this.props.onClose}\n          className=\"mx-1\"\n          variant=\"secondary\"\n        >\n          Close\n        </Button>\n      </Form>\n    );\n  }\n\n  handleChange =\n    (fieldName) =>\n    ({ target: { value } }) =>\n      this.setState({ [fieldName]: value, error: \"\" });\n}\n\nexport default BusForm;\n","import { Modal } from \"react-bootstrap\";\nimport { firestore } from \"../firebase\";\nimport BusForm from \"./BusForm\";\n\nfunction BusModal({ authInfo, onClose, ...rst }) {\n  const onSubmit = async (info) => {\n    await firestore.collection(\"buses\").doc(info.id).set({\n      name: info.name,\n      driverName: info.driverName,\n    });\n    onClose();\n  };\n\n  return (\n    <Modal\n      onHide={onClose}\n      size=\"md\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n      {...rst}\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">Add a bus</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <BusForm onSubmit={onSubmit} onClose={onClose} />\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default BusModal;\n","import React, { Component } from \"react\";\nimport { Container, Button } from \"react-bootstrap\";\nimport { withRouter } from \"react-router\";\nimport qs from \"query-string\";\nimport { firestore } from \"../firebase\";\nimport BusesTable from \"./BusesTable\";\nimport BusesFilter from \"./BusesFilter\";\nimport BusModal from \"../bus-page/BusModal\";\nimport config from \"../config.json\";\n\nexport class HomePage extends Component {\n  state = { key: \"\", value: \"\", showBusModal: false };\n  searchUnsubscriber = null;\n\n  componentDidMount() {\n    this.fetchBuses();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.location?.search !== prevProps.location?.search) {\n      this.fetchBuses();\n    }\n  }\n\n  fetchBuses = () => {\n    const query = qs.parse(this.props.location.search);\n    let firestoreQuery = firestore.collection(\"buses\");\n    if (query.key === \"overcrowded\") {\n      firestoreQuery = firestoreQuery.where(\n        \"highestCountToday\",\n        \">=\",\n        config.overcrowded_threshold\n      );\n    } else if (query.key && query.value) {\n      firestoreQuery = firestoreQuery\n        .where(query.key, \">=\", query.value)\n        .where(query.key, \"<=\", query.value + \"\\uf8ff\");\n    }\n    this.searchUnsubscriber = firestoreQuery.onSnapshot((snapshot) => {\n      this.setState({\n        buses: snapshot.docs.map((d) => ({ ...d.data(), id: d.id })),\n      });\n    });\n  };\n\n  componentWillUnmount() {\n    if (this.searchUnsubscriber) this.searchUnsubscriber();\n  }\n\n  closeBusModal = () => {\n    this.setState({ showBusModal: false });\n  };\n\n  openBusModal = () => {\n    this.setState({ showBusModal: true });\n  };\n\n  render() {\n    return (\n      <Container className=\"my-2\">\n        <BusModal onClose={this.closeBusModal} show={this.state.showBusModal} />\n        <BusesFilter\n          onSearch={(s) =>\n            this.props.history.push(`/?key=${s.key}&value=${s.value}`)\n          }\n          onReset={() => this.props.history.push(`/`)}\n        />\n        <div className=\"d-flex\">\n          <Button className=\"m-1\" onClick={this.openBusModal}>\n            + New Bus\n          </Button>\n        </div>\n        <BusesTable buses={this.state.buses} />\n      </Container>\n    );\n  }\n}\n\nexport default withRouter(HomePage);\n","import React, { Component } from \"react\";\nimport { Form, Button, Card } from \"react-bootstrap\";\n\nexport class UsersFilter extends Component {\n  state = { key: \"\", value: \"\" };\n\n  onSubmit = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSearch(this.state);\n  };\n\n  render() {\n    return (\n      <Card>\n        <Card.Body>\n          <Form\n            onSubmit={this.onSubmit}\n            inline\n            className=\"align-items-baseline\"\n          >\n            <Form.Label className=\"mx-2\">Search By: </Form.Label>\n            <Form.Control\n              onChange={(e) => this.setState({ key: e.target.value })}\n              value={this.state.key}\n              as=\"select\"\n              className=\"my-1 mr-sm-2\"\n              custom\n            >\n              <option value=\"\">Choose...</option>\n              <option value=\"name\">User Name</option>\n              <option value=\"phone\">Phone</option>\n              <option value=\"email\">Email</option>\n            </Form.Control>\n            <Form.Control\n              onChange={(e) => this.setState({ value: e.target.value })}\n              className=\"mb-2 mr-sm-2\"\n              placeholder=\"What to search\"\n            />\n            <Button type=\"submit\" className=\"mb-2 mx-1\">\n              Search\n            </Button>\n            <Button onClick={this.props.onReset} className=\"mb-2\">\n              Reset\n            </Button>\n          </Form>\n        </Card.Body>\n      </Card>\n    );\n  }\n}\n\nexport default UsersFilter;\n","import React from \"react\";\nimport { Table } from \"react-bootstrap\";\n\nfunction UsersTable({ users, onSelected }) {\n  return (\n    <Table striped bordered hover>\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>User Name</th>\n          <th>Email</th>\n          <th>Phone</th>\n          <th>Role</th>\n        </tr>\n      </thead>\n      <tbody>\n        {users &&\n          users.map((user, index) => (\n            <tr key={user.id} role=\"button\" onClick={() => onSelected(user)}>\n              <td>{index + 1}</td>\n              <td>{user.name}</td>\n              <td>{user.email}</td>\n              <td>{user.phone}</td>\n              <td>{user.role}</td>\n            </tr>\n          ))}\n      </tbody>\n    </Table>\n  );\n}\n\nexport default UsersTable;\n","import React, { Component } from \"react\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { getErrorMessage } from \"../utils\";\n\nexport class AddUserForm extends Component {\n  state = {\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    phone: \"\",\n    role: \"normal\",\n    isLoading: false,\n    error: \"\",\n  };\n\n  componentWillMount() {\n    if (this.props.initialData) {\n      this.setState({\n        name: this.props.initialData.name,\n        email: this.props.initialData.email,\n        phone: this.props.initialData.phone,\n        role: this.props.initialData.role,\n      });\n    }\n  }\n\n  onSubmit = async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { onSubmit } = this.props;\n    this.setState({ isLoading: true, error: \"\" });\n    try {\n      await onSubmit(this.state);\n    } catch (error) {\n      const errorMessage = getErrorMessage(error);\n      this.setState({ error: errorMessage });\n    }\n    this.setState({ isLoading: false });\n  };\n\n  render() {\n    return (\n      <Form onSubmit={this.onSubmit}>\n        <Form.Group>\n          <Form.Label>Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"User Name\"\n            value={this.state.name}\n            onChange={this.handleChange(\"name\")}\n            required\n          />\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label>Email address</Form.Label>\n          <Form.Control\n            type=\"email\"\n            placeholder=\"Enter email\"\n            onChange={this.handleChange(\"email\")}\n            value={this.state.email}\n            required\n          />\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label>Phone</Form.Label>\n          <Form.Control\n            type=\"phone\"\n            placeholder=\"Enter phone\"\n            onChange={this.handleChange(\"phone\")}\n            value={this.state.phone}\n          />\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label>Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Password\"\n            value={this.state.password}\n            onChange={this.handleChange(\"password\")}\n            required={!this.props.initialData}\n          />\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label>Role</Form.Label>\n          <Form.Control\n            onChange={this.handleChange(\"role\")}\n            value={this.state.role}\n            as=\"select\"\n          >\n            <option value=\"normal\">Normal User</option>\n            <option value=\"admin\">Admin</option>\n          </Form.Control>\n        </Form.Group>\n\n        <p className=\"text-danger\">{this.state.error}</p>\n        <Button variant=\"primary\" type=\"submit\" disabled={this.state.isLoading}>\n          Save\n        </Button>\n        <Button\n          onClick={this.props.onClose}\n          className=\"mx-1\"\n          variant=\"secondary\"\n        >\n          Close\n        </Button>\n      </Form>\n    );\n  }\n\n  handleChange =\n    (fieldName) =>\n    ({ target: { value } }) =>\n      this.setState({ [fieldName]: value, error: \"\" });\n}\n\nexport default AddUserForm;\n","import { Modal } from \"react-bootstrap\";\nimport { addAuth } from \"../AuthProvider\";\nimport AddUserForm from \"./AddUserForm\";\n\nfunction AddUserModal({ authInfo, onClose, ...rst }) {\n  const onSubmit = async (info) => {\n    await authInfo.signup(info);\n    onClose();\n  };\n\n  return (\n    <Modal\n      onHide={onClose}\n      size=\"md\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n      {...rst}\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          Create a user\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <AddUserForm onSubmit={onSubmit} onClose={onClose} />\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default addAuth(AddUserModal);\n","import { Modal } from \"react-bootstrap\";\nimport { addAuth } from \"../AuthProvider\";\nimport AddUserForm from \"./AddUserForm\";\n\nfunction AddUserModal({ authInfo, userInfo, onClose, ...rst }) {\n  const onSubmit = async (info) => {\n    await authInfo.updateUser(userInfo.id, info);\n    onClose();\n  };\n\n  return (\n    <Modal\n      onHide={onClose}\n      size=\"md\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n      {...rst}\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          Update a user\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <AddUserForm\n          initialData={userInfo}\n          onSubmit={onSubmit}\n          onClose={onClose}\n        />\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default addAuth(AddUserModal);\n","import React, { Component } from \"react\";\nimport { Container, Button } from \"react-bootstrap\";\nimport { withRouter } from \"react-router\";\nimport UsersFilter from \"./UsersFilter\";\nimport UsersTable from \"./UsersTable\";\nimport qs from \"query-string\";\nimport { firestore } from \"../firebase\";\nimport AddUserModal from \"./AddUserModal\";\nimport UpdateUserModal from \"./UpdateUserModal\";\n\nexport class UsersDashboard extends Component {\n  state = { key: \"\", value: \"\", showAddUser: false, selectedUser: null };\n  searchUnsubscriber = null;\n\n  componentDidMount() {\n    this.fetchUsers();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.location?.search !== prevProps.location?.search) {\n      this.fetchUsers();\n    }\n  }\n\n  fetchUsers = () => {\n    const query = qs.parse(this.props.location.search);\n    let firestoreQuery = firestore.collection(\"users\");\n    if (query.key && query.value) {\n      firestoreQuery = firestoreQuery\n        .where(query.key, \">=\", query.value)\n        .where(query.key, \"<=\", query.value + \"\\uf8ff\")\n        .orderBy(query.key);\n    }\n    firestoreQuery = firestoreQuery.orderBy(\"created_at\", \"desc\");\n    this.searchUnsubscriber = firestoreQuery.onSnapshot((snapshot) => {\n      this.setState({\n        users: snapshot.docs.map((d) => ({ ...d.data(), id: d.id })),\n      });\n    });\n  };\n\n  componentWillUnmount() {\n    if (this.searchUnsubscriber) this.searchUnsubscriber();\n  }\n\n  onUserClicked = (userInfo) => {\n    this.setState({ selectedUser: userInfo });\n  };\n\n  render() {\n    return (\n      <Container className=\"my-2\">\n        <AddUserModal\n          show={this.state.showAddUser}\n          onClose={() => this.setState({ showAddUser: false })}\n        />\n        {this.state.selectedUser && (\n          <UpdateUserModal\n            userInfo={this.state.selectedUser}\n            show\n            onClose={() => this.setState({ selectedUser: null })}\n          />\n        )}\n        <UsersFilter\n          onSearch={(s) =>\n            this.props.history.push(`/users?key=${s.key}&value=${s.value}`)\n          }\n        />\n        <div className=\"d-flex\">\n          <Button\n            className=\"m-1\"\n            onClick={() => this.setState({ showAddUser: true })}\n          >\n            + New User\n          </Button>\n        </div>\n        <UsersTable onSelected={this.onUserClicked} users={this.state.users} />\n      </Container>\n    );\n  }\n}\n\nexport default withRouter(UsersDashboard);\n","import React from \"react\";\nimport { Table } from \"react-bootstrap\";\n\nfunction ReadingsTable({ readings }) {\n  return (\n    <Table striped bordered hover>\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>Time</th>\n          <th>Count</th>\n        </tr>\n      </thead>\n      <tbody>\n        {readings &&\n          readings.map((reading, index) => (\n            <tr key={reading.id} role=\"button\">\n              <td>{index + 1}</td>\n              <td>{reading.createdAt.toDate().toLocaleString()}</td>\n              <td>{reading.count}</td>\n            </tr>\n          ))}\n      </tbody>\n    </Table>\n  );\n}\n\nexport default ReadingsTable;\n","import React, { Component } from \"react\";\nimport { Container, Card, Form } from \"react-bootstrap\";\nimport { withRouter } from \"react-router\";\nimport { firestore } from \"../firebase\";\nimport BusForm from \"./BusForm\";\nimport ReadingsTable from \"./ReadingsTable\";\n\nconst getIsoDateString = (date) => {\n  const year = `${date.getFullYear()}`.padStart(4, \"0\");\n  const month = `${date.getMonth()}`.padStart(2, \"0\");\n  const day = `${date.getDate()}`.padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n};\n\nconst getIsoDate = (isoString) => {\n  const parts = isoString.split(\"-\");\n  return new Date(+parts[0], +parts[1], +parts[2]);\n};\n\nclass BusPage extends Component {\n  state = {\n    date: new Date(new Date().toDateString()),\n    bus: null,\n    readings: null,\n  };\n  searchUnsubscriber = null;\n  docUnsubscriber = null;\n\n  componentDidMount() {\n    this.fetchReadings();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.match?.params !== prevProps.match?.params) {\n      this.fetchReadings();\n    }\n  }\n\n  fetchReadings = () => {\n    const busId = this.props.match.params.busId;\n    const nextDay = new Date(this.state.date);\n    nextDay.setDate(nextDay.getDate() + 1);\n\n    let firestoreQuery = firestore\n      .collection(\"buses\")\n      .doc(`${busId}`)\n      .collection(\"readings\")\n      .where(\"createdAt\", \">=\", this.state.date)\n      .where(\"createdAt\", \"<\", nextDay);\n\n    this.searchUnsubscriber = firestoreQuery.onSnapshot((snapshot) => {\n      this.setState({\n        readings: snapshot.docs.map((d) => ({ ...d.data(), id: d.id })),\n      });\n    });\n\n    this.docUnsubscriber = firestore\n      .collection(\"buses\")\n      .doc(`${busId}`)\n      .onSnapshot((d) => {\n        this.setState({ bus: { ...d.data(), id: d.id } });\n      });\n  };\n\n  componentWillUnmount() {\n    if (this.searchUnsubscriber) this.searchUnsubscriber();\n    if (this.docUnsubscriber) this.docUnsubscriber();\n  }\n\n  onUpdateBus = async (busInfo) => {\n    await firestore.collection(\"buses\").doc(busInfo.id).update({\n      name: busInfo.name,\n      driverName: busInfo.driverName,\n    });\n  };\n\n  render() {\n    return (\n      <Container className=\"my-2\">\n        <Card className=\"p-2 m-2\">\n          <Form.Group>\n            <Form.Label className=\"mx-1\">Redings During:</Form.Label>\n            <input\n              value={getIsoDateString(this.state.date)}\n              onChange={(e) => {\n                this.setState(\n                  { date: getIsoDate(e.target.value) },\n                  this.fetchReadings\n                );\n              }}\n              type=\"date\"\n            />\n          </Form.Group>\n        </Card>\n        <Card className=\"p-2 m-2\">\n          {this.state.bus && (\n            <BusForm\n              onSubmit={this.onUpdateBus}\n              onClose={this.props.history.goBack}\n              readOnlyId\n              busInfo={{ ...this.state.bus }}\n            />\n          )}\n        </Card>\n        <Card className=\"p-2 m-2\">\n          <h3 className=\"text-center\">\n            Current Count: {this.state.bus?.count}\n          </h3>\n        </Card>\n        <ReadingsTable readings={this.state.readings} />\n      </Container>\n    );\n  }\n}\n\nexport default withRouter(BusPage);\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\nimport { addAuth } from \"../AuthProvider\";\n\nfunction ProtectedRoute({ children, authInfo, ...rst }) {\n  return (\n    <Route\n      {...rst}\n      render={() =>\n        authInfo.user ? (\n          authInfo.user.role === \"admin\" ? (\n            children\n          ) : (\n            <Redirect to=\"/\" />\n          )\n        ) : (\n          <Redirect to=\"/login\" />\n        )\n      }\n    />\n  );\n}\n\nexport default addAuth(ProtectedRoute);\n","import React from \"react\";\nimport { Container, Nav, Navbar } from \"react-bootstrap\";\nimport LoginPage from \"./login/LoginPage\";\nimport { BrowserRouter as Router, Link, Switch } from \"react-router-dom\";\nimport PublicRoute from \"./routes/PublicRoute\";\nimport ProtectedRoute from \"./routes/ProtectedRoute\";\nimport HomePage from \"./home/HomePage\";\nimport UsersDashboard from \"./users-dashboard/UsersDashboard\";\nimport BusPage from \"./bus-page/BusPage\";\nimport { addAuth } from \"./AuthProvider\";\nimport AdminRoute from \"./routes/AdminRoute\";\n\nfunction HeaderPage({ authInfo }) {\n  return (\n    <div>\n      <Router>\n        {authInfo.user && (\n          <Navbar bg=\"dark\" variant=\"dark\">\n            <Container>\n              <Link className=\"navbar-brand\" to=\"/\">\n                Bus Dashboard\n              </Link>\n              <Nav className=\"mr-auto\">\n                <Link className=\"nav-link\" to=\"/\">\n                  Buses\n                </Link>\n                {authInfo.user.role === \"admin\" && (\n                  <Link className=\"nav-link\" to=\"/users\">\n                    Users\n                  </Link>\n                )}\n              </Nav>\n              <Nav className=\"mr-auto\">\n                <Link className=\"nav-link\" to=\"\" onClick={authInfo.logout}>\n                  Logout\n                </Link>\n              </Nav>\n            </Container>\n          </Navbar>\n        )}\n\n        <Switch>\n          <PublicRoute path=\"/login\">\n            <LoginPage />\n          </PublicRoute>\n          <AdminRoute path=\"/users\">\n            <UsersDashboard />\n          </AdminRoute>\n          <ProtectedRoute path=\"/buses/:busId\">\n            <BusPage />\n          </ProtectedRoute>\n          <ProtectedRoute path=\"/\">\n            <HomePage />\n          </ProtectedRoute>\n        </Switch>\n\n        {authInfo.user && (\n          <Navbar\n            className=\"justify-content-center\"\n            fixed=\"bottom\"\n            bg=\"dark\"\n            variant=\"dark\"\n          >\n            <span className=\"text-light\">Bus Dashboard 2021</span>\n          </Navbar>\n        )}\n      </Router>\n    </div>\n  );\n}\n\nexport default addAuth(HeaderPage);\n","import AuthProvider, { addAuth } from \"./AuthProvider\";\nimport HeaderPage from \"./HeaderPage\";\n\nfunction AppRoutes({ authInfo }) {\n  if (!authInfo.initialized) return <div />;\n  return <HeaderPage />;\n}\nconst AuthAppRoutes = addAuth(AppRoutes);\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <AuthAppRoutes />\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"bootstrap/dist/css/bootstrap.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}